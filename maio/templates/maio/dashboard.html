{% extends 'base/base.html' %}
{% load static %}
{% load maio_extras %}

{% block title %}Dashboard{% endblock title %}

{% block scripts %}
  <script src="{% static 'maio/js/dashboard.js' %}"></script>
{% endblock %}

{% block script %}
  <script>
  maio_conf = new Config({
    'js_debug': Boolean({{ js_debug }}),
    'csrf_token': '{{ csrf_token }}',
    'delete_media_url': '{% url "delete_media" %}',
    'change_thumbnail_url': '{% url "change_thumbnail" %}',
    'rating_url': '{% url "rating" %}',
  });
  </script>
{% endblock script %}

{% block content %}
  <a class="btn btn-secondary maio-offcanvas-button" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
    <i class="bi bi-indent"></i>
  </a>
  <div class="container"> <!-- container -->
    {% include 'maio/_off_canvas.html' %}

    <h1>{% if is_admin %}Maio Admin: User Dashboard ({{ with_user.username }}){% else %}Dashboard{% if with_user %} ({{ with_user.username }}){% endif%}{% endif %}</h1>
    <h4>{{ num_media }} media found</h4>

    {% include 'maio/_pagination.html' with instance=1 %}
    {% include 'maio/_filters.html' with medium=medium media_type=media_type love=love bookmark=bookmark %}

    <div class="row justify-content-center">
      {% for medium in media %}
        {% if user_setting.default_dashboard_view == 'default' %}
          {% include 'maio/_image_card.html' %}
        {% elif user_setting.default_dashboard_view == 'simple' %}
          {% include 'maio/_image_card_simple.html' %}
        {% elif user_setting.default_dashboard_view == 'list' %}
          {% include 'maio/_image_card.html' %}
        {% elif user_setting.default_dashboard_view == 'thumbnails' %}
          {% include 'maio/_image_card_thumbnails.html' %}
        {% else %}
          {% include 'maio/_image_card.html' %}
        {% endif %}
      {% empty %}
        <div>
          No media.
        </div>
      {% endfor %}
    </div> <!-- /row -->

    {% include 'maio/_pagination.html' with instance=2 %}
    {% include 'maio/_stats.html' %}
  </div> <!-- /container -->
{% endblock content %}
